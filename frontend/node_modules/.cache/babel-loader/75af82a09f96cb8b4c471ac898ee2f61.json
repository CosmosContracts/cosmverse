{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Params = void 0;\n/* eslint-disable @typescript-eslint/naming-convention */\n\nconst encoding_1 = require(\"@cosmjs/encoding\");\n\nconst jsonrpc_1 = require(\"../../../jsonrpc\");\n\nconst encodings_1 = require(\"../../encodings\");\n\nconst requests = __importStar(require(\"../../requests\"));\n\nfunction encodeHeightParam(param) {\n  return {\n    height: encodings_1.may(encodings_1.Integer.encode, param.height)\n  };\n}\n\nfunction encodeBlockchainRequestParams(param) {\n  return {\n    minHeight: encodings_1.may(encodings_1.Integer.encode, param.minHeight),\n    maxHeight: encodings_1.may(encodings_1.Integer.encode, param.maxHeight)\n  };\n}\n\nfunction encodeBlockSearchParams(params) {\n  return {\n    query: params.query,\n    page: encodings_1.may(encodings_1.Integer.encode, params.page),\n    per_page: encodings_1.may(encodings_1.Integer.encode, params.per_page),\n    order_by: params.order_by\n  };\n}\n\nfunction encodeAbciQueryParams(params) {\n  return {\n    path: encodings_1.assertNotEmpty(params.path),\n    data: encoding_1.toHex(params.data),\n    height: encodings_1.may(encodings_1.Integer.encode, params.height),\n    prove: params.prove\n  };\n}\n\nfunction encodeBroadcastTxParams(params) {\n  return {\n    tx: encoding_1.toBase64(encodings_1.assertNotEmpty(params.tx))\n  };\n}\n\nfunction encodeTxParams(params) {\n  return {\n    hash: encoding_1.toBase64(encodings_1.assertNotEmpty(params.hash)),\n    prove: params.prove\n  };\n}\n\nfunction encodeTxSearchParams(params) {\n  return {\n    query: params.query,\n    prove: params.prove,\n    page: encodings_1.may(encodings_1.Integer.encode, params.page),\n    per_page: encodings_1.may(encodings_1.Integer.encode, params.per_page)\n  };\n}\n\nfunction encodeValidatorsParams(params) {\n  return {\n    height: encodings_1.may(encodings_1.Integer.encode, params.height),\n    page: encodings_1.may(encodings_1.Integer.encode, params.page),\n    per_page: encodings_1.may(encodings_1.Integer.encode, params.per_page)\n  };\n}\n\nclass Params {\n  static encodeAbciInfo(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method);\n  }\n\n  static encodeAbciQuery(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeAbciQueryParams(req.params));\n  }\n\n  static encodeBlock(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeHeightParam(req.params));\n  }\n\n  static encodeBlockchain(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeBlockchainRequestParams(req.params));\n  }\n\n  static encodeBlockResults(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeHeightParam(req.params));\n  }\n\n  static encodeBlockSearch(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeBlockSearchParams(req.params));\n  }\n\n  static encodeBroadcastTx(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeBroadcastTxParams(req.params));\n  }\n\n  static encodeCommit(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeHeightParam(req.params));\n  }\n\n  static encodeGenesis(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method);\n  }\n\n  static encodeHealth(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method);\n  }\n\n  static encodeStatus(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method);\n  }\n\n  static encodeSubscribe(req) {\n    const eventTag = {\n      key: \"tm.event\",\n      value: req.query.type\n    };\n    const query = requests.buildQuery({\n      tags: [eventTag],\n      raw: req.query.raw\n    });\n    return jsonrpc_1.createJsonRpcRequest(\"subscribe\", {\n      query: query\n    });\n  }\n\n  static encodeTx(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeTxParams(req.params));\n  } // TODO: encode params for query string???\n\n\n  static encodeTxSearch(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeTxSearchParams(req.params));\n  }\n\n  static encodeValidators(req) {\n    return jsonrpc_1.createJsonRpcRequest(req.method, encodeValidatorsParams(req.params));\n  }\n\n}\n\nexports.Params = Params;","map":{"version":3,"sources":["../../../../src/tendermint34/adaptors/v0-34/requests.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Params = void 0;\n/* eslint-disable @typescript-eslint/naming-convention */\nconst encoding_1 = require(\"@cosmjs/encoding\");\nconst jsonrpc_1 = require(\"../../../jsonrpc\");\nconst encodings_1 = require(\"../../encodings\");\nconst requests = __importStar(require(\"../../requests\"));\nfunction encodeHeightParam(param) {\n    return {\n        height: encodings_1.may(encodings_1.Integer.encode, param.height),\n    };\n}\nfunction encodeBlockchainRequestParams(param) {\n    return {\n        minHeight: encodings_1.may(encodings_1.Integer.encode, param.minHeight),\n        maxHeight: encodings_1.may(encodings_1.Integer.encode, param.maxHeight),\n    };\n}\nfunction encodeBlockSearchParams(params) {\n    return {\n        query: params.query,\n        page: encodings_1.may(encodings_1.Integer.encode, params.page),\n        per_page: encodings_1.may(encodings_1.Integer.encode, params.per_page),\n        order_by: params.order_by,\n    };\n}\nfunction encodeAbciQueryParams(params) {\n    return {\n        path: encodings_1.assertNotEmpty(params.path),\n        data: encoding_1.toHex(params.data),\n        height: encodings_1.may(encodings_1.Integer.encode, params.height),\n        prove: params.prove,\n    };\n}\nfunction encodeBroadcastTxParams(params) {\n    return {\n        tx: encoding_1.toBase64(encodings_1.assertNotEmpty(params.tx)),\n    };\n}\nfunction encodeTxParams(params) {\n    return {\n        hash: encoding_1.toBase64(encodings_1.assertNotEmpty(params.hash)),\n        prove: params.prove,\n    };\n}\nfunction encodeTxSearchParams(params) {\n    return {\n        query: params.query,\n        prove: params.prove,\n        page: encodings_1.may(encodings_1.Integer.encode, params.page),\n        per_page: encodings_1.may(encodings_1.Integer.encode, params.per_page),\n    };\n}\nfunction encodeValidatorsParams(params) {\n    return {\n        height: encodings_1.may(encodings_1.Integer.encode, params.height),\n        page: encodings_1.may(encodings_1.Integer.encode, params.page),\n        per_page: encodings_1.may(encodings_1.Integer.encode, params.per_page),\n    };\n}\nclass Params {\n    static encodeAbciInfo(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method);\n    }\n    static encodeAbciQuery(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeAbciQueryParams(req.params));\n    }\n    static encodeBlock(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeHeightParam(req.params));\n    }\n    static encodeBlockchain(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeBlockchainRequestParams(req.params));\n    }\n    static encodeBlockResults(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeHeightParam(req.params));\n    }\n    static encodeBlockSearch(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeBlockSearchParams(req.params));\n    }\n    static encodeBroadcastTx(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeBroadcastTxParams(req.params));\n    }\n    static encodeCommit(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeHeightParam(req.params));\n    }\n    static encodeGenesis(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method);\n    }\n    static encodeHealth(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method);\n    }\n    static encodeStatus(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method);\n    }\n    static encodeSubscribe(req) {\n        const eventTag = { key: \"tm.event\", value: req.query.type };\n        const query = requests.buildQuery({ tags: [eventTag], raw: req.query.raw });\n        return jsonrpc_1.createJsonRpcRequest(\"subscribe\", { query: query });\n    }\n    static encodeTx(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeTxParams(req.params));\n    }\n    // TODO: encode params for query string???\n    static encodeTxSearch(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeTxSearchParams(req.params));\n    }\n    static encodeValidators(req) {\n        return jsonrpc_1.createJsonRpcRequest(req.method, encodeValidatorsParams(req.params));\n    }\n}\nexports.Params = Params;\n//# sourceMappingURL=requests.js.map"]},"metadata":{},"sourceType":"script"}