{"version":3,"sources":["../../src/use-menu.ts"],"names":["MenuDescendantsProvider","useMenuDescendantsContext","useMenuDescendants","useMenuDescendant","strict","name","MenuProvider","useMenuContext","useMenu","props","id","closeOnSelect","closeOnBlur","autoSelect","isLazy","isOpenProp","isOpen","defaultIsOpen","onCloseProp","onClose","onOpenProp","onOpen","placement","lazyBehavior","direction","computePositionOnMount","popperProps","menuRef","React","useRef","buttonRef","descendants","focusMenu","useCallback","current","nextTick","selectTextIfInput","focusFirstItem","setTimeout","first","firstEnabled","setFocusedIndex","index","timeoutIds","add","focusLastItem","last","lastEnabled","onOpenInternal","onToggle","enabled","ref","handler","event","contains","target","popper","useState","focusedIndex","focusRef","visible","shouldFocus","buttonId","menuId","openAndFocusMenu","Set","forEach","clearTimeout","clear","openAndFocusFirstItem","openAndFocusLastItem","refocus","doc","hasFocusWithin","activeElement","shouldRefocus","node","item","preventScroll","onTransitionEnd","forceUpdate","orientation","useMenuButton","externalRef","menu","onKeyDown","eventKey","keyMap","Enter","ArrowDown","ArrowUp","action","preventDefault","stopPropagation","referenceRef","onClick","isTargetMenuItem","getAttribute","startsWith","useMenuList","Error","createTypeaheadHandler","key","Tab","Escape","next","nextEnabled","prev","prevEnabled","fn","onTypeahead","character","nextItem","values","textContent","indexOf","hasBeenOpened","shouldRenderChildren","hasBeenSelected","isSelected","children","tabIndex","role","style","transformOrigin","useMenuPositioner","getPopperProps","visibility","useMenuItem","onMouseEnterProp","onMouseEnter","onMouseMoveProp","onMouseMove","onMouseLeaveProp","onMouseLeave","onClickProp","isDisabled","isFocusable","htmlProps","menuCloseOnSelect","disabled","register","currentTarget","isFocused","trulyDisabled","clickableProps","useMenuOption","type","isChecked","rest","ownProps","useMenuOptionGroup","valueProp","value","defaultValue","onChangeProp","onChange","isRadio","fallback","setValue","selectedValue","nextValue","includes","validChildren","clones","map","child","cloneElement","useMenuState"],"mappings":"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","sourcesContent":["import { useClickable } from \"@chakra-ui/clickable\"\nimport { createDescendantContext } from \"@chakra-ui/descendant\"\nimport {\n  useControllableState,\n  useDisclosure,\n  UseDisclosureProps,\n  useFocusOnHide,\n  useId,\n  useIds,\n  useOutsideClick,\n  useShortcut,\n  useUnmountEffect,\n  useUpdateEffect,\n} from \"@chakra-ui/hooks\"\nimport { usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport {\n  createContext,\n  EventKeyMap,\n  getValidChildren,\n  mergeRefs,\n} from \"@chakra-ui/react-utils\"\nimport {\n  addItem,\n  callAllHandlers,\n  dataAttr,\n  determineLazyBehavior,\n  focus,\n  getNextItemFromSearch,\n  getOwnerDocument,\n  isActiveElement,\n  isArray,\n  isHTMLElement,\n  isString,\n  LazyBehavior,\n  normalizeEventKey,\n  removeItem,\n} from \"@chakra-ui/utils\"\nimport * as React from \"react\"\n\n/* -------------------------------------------------------------------------------------------------\n * Create context to track descendants and their indices\n * -----------------------------------------------------------------------------------------------*/\n\nexport const [\n  MenuDescendantsProvider,\n  useMenuDescendantsContext,\n  useMenuDescendants,\n  useMenuDescendant,\n] = createDescendantContext<HTMLElement>()\n\n/* -------------------------------------------------------------------------------------------------\n * Create context to track menu state and logic\n * -----------------------------------------------------------------------------------------------*/\n\nexport const [MenuProvider, useMenuContext] = createContext<\n  Omit<UseMenuReturn, \"descendants\">\n>({\n  strict: false,\n  name: \"MenuContext\",\n})\n\n/* -------------------------------------------------------------------------------------------------\n * useMenu hook\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuProps extends UsePopperProps, UseDisclosureProps {\n  /**\n   * If `true`, the menu will close when a menu item is\n   * clicked\n   *\n   * @default true\n   */\n  closeOnSelect?: boolean\n  /**\n   * If `true`, the menu will close when you click outside\n   * the menu list\n   *\n   * @default true\n   */\n  closeOnBlur?: boolean\n  /**\n   * If `true`, the first enabled menu item will receive focus and be selected\n   * when the menu opens.\n   *\n   * @default true\n   */\n  autoSelect?: boolean\n  /**\n   * Performance ðŸš€:\n   * If `true`, the MenuItem rendering will be deferred\n   * until the menu is open.\n   */\n  isLazy?: boolean\n  /**\n   * Performance ðŸš€:\n   * The lazy behavior of menu's content when not visible.\n   * Only works when `isLazy={true}`\n   *\n   * - \"unmount\": The menu's content is always unmounted when not open.\n   * - \"keepMounted\": The menu's content initially unmounted,\n   * but stays mounted when menu is open.\n   *\n   * @default \"unmount\"\n   */\n  lazyBehavior?: LazyBehavior\n  /**\n   * If `rtl`, poper placement positions will be flipped i.e. 'top-right' will\n   * become 'top-left' and vice-verse\n   */\n  direction?: \"ltr\" | \"rtl\"\n  /*\n   * If `true`, the menu will be positioned when it mounts\n   * (even if it's not open).\n   *\n   * Note ðŸš¨: We don't recommend using this in a menu/popover intensive UI or page\n   * as it might affect scrolling performance.\n   */\n  computePositionOnMount?: boolean\n}\n\n/**\n * React Hook to manage a menu\n *\n * It provides the logic and will be used with react context\n * to propagate its return value to all children\n */\nexport function useMenu(props: UseMenuProps = {}) {\n  const {\n    id,\n    closeOnSelect = true,\n    closeOnBlur = true,\n    autoSelect = true,\n    isLazy,\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    onClose: onCloseProp,\n    onOpen: onOpenProp,\n    placement = \"bottom-start\",\n    lazyBehavior = \"unmount\",\n    direction,\n    computePositionOnMount = false,\n    ...popperProps\n  } = props\n  /**\n   * Prepare the reference to the menu and disclosure\n   */\n  const menuRef = React.useRef<HTMLDivElement>(null)\n  const buttonRef = React.useRef<HTMLButtonElement>(null)\n\n  /**\n   * Context to register all menu item nodes\n   */\n  const descendants = useMenuDescendants()\n\n  const focusMenu = React.useCallback(() => {\n    focus(menuRef.current, {\n      nextTick: true,\n      selectTextIfInput: false,\n    })\n  }, [])\n\n  const focusFirstItem = React.useCallback(() => {\n    const id = setTimeout(() => {\n      const first = descendants.firstEnabled()\n      if (first) setFocusedIndex(first.index)\n    })\n    timeoutIds.current.add(id)\n  }, [descendants])\n\n  const focusLastItem = React.useCallback(() => {\n    const id = setTimeout(() => {\n      const last = descendants.lastEnabled()\n      if (last) setFocusedIndex(last.index)\n    })\n    timeoutIds.current.add(id)\n  }, [descendants])\n\n  const onOpenInternal = React.useCallback(() => {\n    onOpenProp?.()\n    if (autoSelect) {\n      focusFirstItem()\n    } else {\n      focusMenu()\n    }\n  }, [autoSelect, focusFirstItem, focusMenu, onOpenProp])\n\n  const { isOpen, onOpen, onClose, onToggle } = useDisclosure({\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    onClose: onCloseProp,\n    onOpen: onOpenInternal,\n  })\n\n  useOutsideClick({\n    enabled: isOpen && closeOnBlur,\n    ref: menuRef,\n    handler: (event) => {\n      if (!buttonRef.current?.contains(event.target as HTMLElement)) {\n        onClose()\n      }\n    },\n  })\n\n  /**\n   * Add some popper.js for dynamic positioning\n   */\n  const popper = usePopper({\n    ...popperProps,\n    enabled: isOpen || computePositionOnMount,\n    placement,\n    direction,\n  })\n\n  const [focusedIndex, setFocusedIndex] = React.useState(-1)\n\n  /**\n   * Focus the button when we close the menu\n   */\n  useUpdateEffect(() => {\n    if (!isOpen) {\n      setFocusedIndex(-1)\n    }\n  }, [isOpen])\n\n  useFocusOnHide(menuRef, {\n    focusRef: buttonRef,\n    visible: isOpen,\n    shouldFocus: true,\n  })\n\n  /**\n   * Generate unique ids for menu's list and button\n   */\n  const [buttonId, menuId] = useIds(id, `menu-button`, `menu-list`)\n\n  const openAndFocusMenu = React.useCallback(() => {\n    onOpen()\n    focusMenu()\n  }, [onOpen, focusMenu])\n\n  const timeoutIds = React.useRef<Set<number>>(new Set([]))\n\n  useUnmountEffect(() => {\n    timeoutIds.current.forEach((id) => clearTimeout(id))\n    timeoutIds.current.clear()\n  })\n\n  const openAndFocusFirstItem = React.useCallback(() => {\n    onOpen()\n    focusFirstItem()\n  }, [focusFirstItem, onOpen])\n\n  const openAndFocusLastItem = React.useCallback(() => {\n    onOpen()\n    focusLastItem()\n  }, [onOpen, focusLastItem])\n\n  const refocus = React.useCallback(() => {\n    const doc = getOwnerDocument(menuRef.current)\n    const hasFocusWithin = menuRef.current?.contains(doc.activeElement)\n    const shouldRefocus = isOpen && !hasFocusWithin\n\n    if (!shouldRefocus) return\n\n    const node = descendants.item(focusedIndex)?.node\n    if (node) {\n      focus(node, { selectTextIfInput: false, preventScroll: false })\n    }\n  }, [isOpen, focusedIndex, descendants])\n\n  return {\n    openAndFocusMenu,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    onTransitionEnd: refocus,\n    descendants,\n    popper,\n    buttonId,\n    menuId,\n    forceUpdate: popper.forceUpdate,\n    orientation: \"vertical\",\n    isOpen,\n    onToggle,\n    onOpen,\n    onClose,\n    menuRef,\n    buttonRef,\n    focusedIndex,\n    closeOnSelect,\n    closeOnBlur,\n    autoSelect,\n    setFocusedIndex,\n    isLazy,\n    lazyBehavior,\n  }\n}\n\nexport interface UseMenuReturn extends ReturnType<typeof useMenu> {}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuButton hook\n * -----------------------------------------------------------------------------------------------*/\nexport interface UseMenuButtonProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {}\n\n/**\n * React Hook to manage a menu button.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and its return value\n * is passed as `context` to this hook.\n */\nexport function useMenuButton(\n  props: UseMenuButtonProps = {},\n  externalRef: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  const { onToggle, popper, openAndFocusFirstItem, openAndFocusLastItem } = menu\n\n  const onKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n      const keyMap: EventKeyMap = {\n        Enter: openAndFocusFirstItem,\n        ArrowDown: openAndFocusFirstItem,\n        ArrowUp: openAndFocusLastItem,\n      }\n\n      const action = keyMap[eventKey]\n\n      if (action) {\n        event.preventDefault()\n        event.stopPropagation()\n        action(event)\n      }\n    },\n    [openAndFocusFirstItem, openAndFocusLastItem],\n  )\n\n  return {\n    ...props,\n    ref: mergeRefs(menu.buttonRef, externalRef, popper.referenceRef),\n    id: menu.buttonId,\n    \"data-active\": dataAttr(menu.isOpen),\n    \"aria-expanded\": menu.isOpen,\n    \"aria-haspopup\": \"menu\" as React.AriaAttributes[\"aria-haspopup\"],\n    \"aria-controls\": menu.menuId,\n    onClick: callAllHandlers(props.onClick, onToggle),\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\nfunction isTargetMenuItem(target: EventTarget | null) {\n  // this will catch `menuitem`, `menuitemradio`, `menuitemcheckbox`\n  return (\n    isHTMLElement(target) &&\n    !!target.getAttribute(\"role\")?.startsWith(\"menuitem\")\n  )\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuList\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuListProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {}\n\n/**\n * React Hook to manage a menu list.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and its return value\n * is passed as `context` to this hook.\n */\nexport function useMenuList(\n  props: UseMenuListProps = {},\n  ref: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  if (!menu) {\n    throw new Error(\n      `useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>`,\n    )\n  }\n\n  const {\n    focusedIndex,\n    setFocusedIndex,\n    menuRef,\n    isOpen,\n    onClose,\n    menuId,\n    isLazy,\n    lazyBehavior,\n  } = menu\n\n  const descendants = useMenuDescendantsContext()\n\n  /**\n   * Hook that creates a keydown event handler that listens\n   * to printable keyboard character press\n   */\n  const createTypeaheadHandler = useShortcut({\n    preventDefault: (event) =>\n      event.key !== \" \" && isTargetMenuItem(event.target),\n  })\n\n  const onKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n\n      const keyMap: EventKeyMap = {\n        Tab: (event) => event.preventDefault(),\n        Escape: onClose,\n        ArrowDown: () => {\n          const next = descendants.nextEnabled(focusedIndex)\n          if (next) setFocusedIndex(next.index)\n        },\n        ArrowUp: () => {\n          const prev = descendants.prevEnabled(focusedIndex)\n          if (prev) setFocusedIndex(prev.index)\n        },\n      }\n\n      const fn = keyMap[eventKey]\n\n      if (fn) {\n        event.preventDefault()\n        fn(event)\n        return\n      }\n\n      /**\n       * Typeahead: Based on current character pressed,\n       * find the next item to be selected\n       */\n      const onTypeahead = createTypeaheadHandler((character) => {\n        const nextItem = getNextItemFromSearch(\n          descendants.values(),\n          character,\n          (item) => item?.node?.textContent ?? \"\",\n          descendants.item(focusedIndex),\n        )\n        if (nextItem) {\n          const index = descendants.indexOf(nextItem.node)\n          setFocusedIndex(index)\n        }\n      })\n\n      if (isTargetMenuItem(event.target)) {\n        onTypeahead(event)\n      }\n    },\n    [\n      descendants,\n      focusedIndex,\n      createTypeaheadHandler,\n      onClose,\n      setFocusedIndex,\n    ],\n  )\n\n  const hasBeenOpened = React.useRef(false)\n  if (isOpen) {\n    hasBeenOpened.current = true\n  }\n\n  const shouldRenderChildren = determineLazyBehavior({\n    hasBeenSelected: hasBeenOpened.current,\n    isLazy,\n    lazyBehavior,\n    isSelected: isOpen,\n  })\n\n  return {\n    ...props,\n    ref: mergeRefs(menuRef, ref),\n    children: shouldRenderChildren ? props.children : null,\n    tabIndex: -1,\n    role: \"menu\",\n    id: menuId,\n    style: {\n      ...props.style,\n      transformOrigin: \"var(--popper-transform-origin)\",\n    },\n    \"aria-orientation\": \"vertical\" as React.AriaAttributes[\"aria-orientation\"],\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuPosition: Composes usePopper to position the menu\n * -----------------------------------------------------------------------------------------------*/\n\nexport function useMenuPositioner(props: any = {}) {\n  const { popper, isOpen } = useMenuContext()\n  return popper.getPopperProps({\n    ...props,\n    style: {\n      visibility: isOpen ? \"visible\" : \"hidden\",\n      ...props.style,\n    },\n  })\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuItem: Hook for each menu item within the menu list.\n   We also use it in `useMenuItemOption`\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuItemProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {\n  /**\n   * If `true`, the menuitem will be disabled\n   */\n  isDisabled?: boolean\n  /**\n   * If `true` and the menuitem is disabled, it'll\n   * remain keyboard-focusable\n   */\n  isFocusable?: boolean\n  /**\n   * Overrides the parent menu's `closeOnSelect` prop.\n   */\n  closeOnSelect?: boolean\n}\n\nexport function useMenuItem(\n  props: UseMenuItemProps = {},\n  externalRef: React.Ref<any> = null,\n) {\n  const {\n    onMouseEnter: onMouseEnterProp,\n    onMouseMove: onMouseMoveProp,\n    onMouseLeave: onMouseLeaveProp,\n    onClick: onClickProp,\n    isDisabled,\n    isFocusable,\n    closeOnSelect,\n    ...htmlProps\n  } = props\n\n  const menu = useMenuContext()\n\n  const {\n    setFocusedIndex,\n    focusedIndex,\n    closeOnSelect: menuCloseOnSelect,\n    onClose,\n    menuRef,\n    isOpen,\n    menuId,\n  } = menu\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  const id = `${menuId}-menuitem-${useId()}`\n\n  /**\n   * Register the menuitem's node into the domContext\n   */\n  const { index, register } = useMenuDescendant({\n    disabled: isDisabled && !isFocusable,\n  })\n\n  const onMouseEnter = React.useCallback(\n    (event) => {\n      onMouseEnterProp?.(event)\n      if (isDisabled) return\n      setFocusedIndex(index)\n    },\n    [setFocusedIndex, index, isDisabled, onMouseEnterProp],\n  )\n\n  const onMouseMove = React.useCallback(\n    (event) => {\n      onMouseMoveProp?.(event)\n      if (ref.current && !isActiveElement(ref.current)) {\n        onMouseEnter(event)\n      }\n    },\n    [onMouseEnter, onMouseMoveProp],\n  )\n\n  const onMouseLeave = React.useCallback(\n    (event) => {\n      onMouseLeaveProp?.(event)\n      if (isDisabled) return\n      setFocusedIndex(-1)\n    },\n    [setFocusedIndex, isDisabled, onMouseLeaveProp],\n  )\n\n  const onClick = React.useCallback(\n    (event: React.MouseEvent) => {\n      onClickProp?.(event)\n      if (!isTargetMenuItem(event.currentTarget)) return\n      /**\n       * Close menu and parent menus, allowing the MenuItem\n       * to override its parent menu's `closeOnSelect` prop.\n       */\n      if (closeOnSelect ?? menuCloseOnSelect) {\n        onClose()\n      }\n    },\n    [onClose, onClickProp, menuCloseOnSelect, closeOnSelect],\n  )\n\n  const isFocused = index === focusedIndex\n\n  const trulyDisabled = isDisabled && !isFocusable\n\n  useUpdateEffect(() => {\n    if (!isOpen) return\n    if (isFocused && !trulyDisabled && ref.current) {\n      focus(ref.current, {\n        nextTick: true,\n        selectTextIfInput: false,\n        preventScroll: false,\n      })\n    } else if (menuRef.current && !isActiveElement(menuRef.current)) {\n      focus(menuRef.current, { preventScroll: false })\n    }\n  }, [isFocused, trulyDisabled, menuRef, isOpen])\n\n  const clickableProps = useClickable({\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    ref: mergeRefs(register, ref, externalRef),\n    isDisabled,\n    isFocusable,\n  })\n\n  return {\n    ...htmlProps,\n    ...clickableProps,\n    id,\n    role: \"menuitem\",\n    tabIndex: isFocused ? 0 : -1,\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuOption: Composes useMenuItem to provide a selectable/checkable menu item\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuOptionOptions {\n  value?: string\n  isChecked?: boolean\n  type?: \"radio\" | \"checkbox\"\n  children?: React.ReactNode\n}\n\nexport interface UseMenuOptionProps\n  extends UseMenuItemProps,\n    UseMenuOptionOptions {}\n\nexport function useMenuOption(\n  props: UseMenuOptionProps = {},\n  ref: React.Ref<any> = null,\n) {\n  const { type = \"radio\", isChecked, ...rest } = props\n  const ownProps = useMenuItem(rest, ref)\n  return {\n    ...ownProps,\n    role: `menuitem${type}`,\n    \"aria-checked\": isChecked as React.AriaAttributes[\"aria-checked\"],\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuOptionGroup: Manages the state of multiple selectable menuitem or menu option\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuOptionGroupProps {\n  value?: string | string[]\n  defaultValue?: string | string[]\n  type?: \"radio\" | \"checkbox\"\n  onChange?: (value: string | string[]) => void\n  children?: React.ReactNode\n}\n\nexport function useMenuOptionGroup(props: UseMenuOptionGroupProps = {}) {\n  const {\n    children,\n    type = \"radio\",\n    value: valueProp,\n    defaultValue,\n    onChange: onChangeProp,\n    ...htmlProps\n  } = props\n\n  const isRadio = type === \"radio\"\n\n  const fallback = isRadio ? \"\" : []\n\n  const [value, setValue] = useControllableState({\n    defaultValue: defaultValue ?? fallback,\n    value: valueProp,\n    onChange: onChangeProp,\n  })\n\n  const onChange = React.useCallback(\n    (selectedValue: string) => {\n      if (type === \"radio\" && isString(value)) {\n        setValue(selectedValue)\n      }\n\n      if (type === \"checkbox\" && isArray(value)) {\n        const nextValue = value.includes(selectedValue)\n          ? removeItem(value, selectedValue)\n          : addItem(value, selectedValue)\n\n        setValue(nextValue)\n      }\n    },\n    [value, setValue, type],\n  )\n\n  const validChildren = getValidChildren(children)\n\n  const clones = validChildren.map((child) => {\n    /**\n     * We've added an internal `id` to each `MenuItemOption`,\n     * let's use that for type-checking.\n     *\n     * We can't rely on displayName or the element's type since\n     * they can be changed by the user.\n     */\n    if ((child.type as any).id !== \"MenuItemOption\") return child\n\n    const onClick = (event: MouseEvent) => {\n      onChange(child.props.value)\n      child.props.onClick?.(event)\n    }\n\n    const isChecked =\n      type === \"radio\"\n        ? child.props.value === value\n        : value.includes(child.props.value)\n\n    return React.cloneElement(child, {\n      type,\n      onClick,\n      isChecked,\n    })\n  })\n\n  return {\n    ...htmlProps,\n    children: clones,\n  }\n}\n\nexport function useMenuState() {\n  const { isOpen, onClose } = useMenuContext()\n  return { isOpen, onClose }\n}\n"],"file":"use-menu.js"}